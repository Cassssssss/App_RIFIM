{"ast":null,"code":"// src/pages/Systems.js\nimport React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{Plus,Search,Trash2,AlertCircle,Loader}from'lucide-react';import{api}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Systems=()=>{const[systems,setSystems]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{console.log('ðŸ”„ Systems component mounted');loadSystems();},[]);const loadSystems=async()=>{console.log('ðŸ”„ Starting loadSystems');setLoading(true);setError(null);try{console.log('ðŸ“¡ Calling API.getSystems');const data=await api.getSystems();console.log('ðŸ“¥ Received systems:',data);setSystems(Array.isArray(data)?data:[]);}catch(error){console.error('âŒ Error in loadSystems:',error);setError('Impossible de charger les systÃ¨mes. Veuillez rÃ©essayer.');}finally{setLoading(false);}};const handleDelete=async(systemId,e)=>{e.preventDefault();if(window.confirm('Voulez-vous vraiment supprimer ce systÃ¨me ?')){try{setLoading(true);await api.deleteSystem(systemId);await loadSystems();}catch(error){console.error('Erreur lors de la suppression:',error);setError('Erreur lors de la suppression. Veuillez rÃ©essayer.');}finally{setLoading(false);}}};const handleRetry=()=>{loadSystems();};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#4f5b93] text-white p-4\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold\",children:\"Syst\\xE8mes radiologiques\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-3 text-gray-400\",size:20}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Rechercher un syst\\xE8me...\",className:\"w-full p-2 pl-10 rounded-lg border border-gray-300\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"text-red-500 mr-2\",size:20}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700\",children:error})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\",children:\"R\\xE9essayer\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center p-8\",children:/*#__PURE__*/_jsx(Loader,{className:\"animate-spin text-[#4f5b93]\",size:32})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:systems.length===0&&!error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-8 bg-white rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun syst\\xE8me trouv\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Cliquez sur le + pour en ajouter un\"})]}):systems.filter(system=>system.name.toLowerCase().includes(searchTerm.toLowerCase())).map(system=>/*#__PURE__*/_jsxs(\"div\",{className:\"block bg-white rounded-lg shadow p-4 hover:shadow-lg transition-shadow relative\",children:[/*#__PURE__*/_jsx(Link,{to:`/system/${system._id}`,className:\"block\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-[#4f5b93]\",children:system.name})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>handleDelete(system._id,e),className:\"absolute right-4 top-4 text-red-500 hover:text-red-700 transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{size:20})})]},system._id))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/add-folder/system'),className:\"fixed bottom-6 right-6 bg-[#4f5b93] text-white rounded-full p-4 shadow-lg hover:bg-[#3f4973] transition-colors disabled:opacity-50\",disabled:loading,children:/*#__PURE__*/_jsx(Plus,{size:24})})]});};export default Systems;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}